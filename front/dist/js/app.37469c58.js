(function(){"use strict";var e={357:function(e,t,n){var o=n(9242),s=n(3396),i=n.p+"img/logo.4d965ac0.png";const a={id:"App"},l={id:"englobe-logo"},r=(0,s._)("img",{id:"logo",src:i,alt:"Photo du logo de groupomania, représentant une planéte en line-art"},null,-1),u=(0,s._)("link",{rel:"icon",href:"./assets/logo.png"},null,-1),p={class:"menu"},d=(0,s.uE)('<input type="checkbox" href="#" class="menu-open" name="menu-open" id="menu-open"><label class="menu-open-button" for="menu-open"><span class="hamburger hamburger-1"></span><span class="hamburger hamburger-2"></span><span class="hamburger hamburger-3"></span></label>',2),c=(0,s._)("i",{style:{transform:"scale(1.5)"},class:"fa-solid fa-house-chimney"},null,-1),m=(0,s._)("i",{style:{transform:"scale(1.5)"},class:"fa-solid fa-user-gear"},null,-1),f=(0,s._)("i",{style:{transform:"scale(1.5)"},class:"fa-solid fa-key login-btn"},null,-1),h=(0,s._)("i",{style:{transform:"scale(1.5)"},class:"fa-solid fa-power-off"},null,-1),g=(0,s._)("i",{style:{transform:"scale(1.5)"},class:"fa-solid fa-user-plus"},null,-1);function b(e,t,n,o,i,b){const _=(0,s.up)("router-link"),w=(0,s.up)("router-view");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s._)("div",a,[(0,s._)("div",l,[(0,s.Wm)(_,{to:"/"},{default:(0,s.w5)((()=>[r])),_:1})]),u,(0,s._)("nav",p,[d,!0===i.logged?((0,s.wg)(),(0,s.j4)(_,{key:0,title:"Social",to:"/groupomania/",href:"#",class:"menu-item"},{default:(0,s.w5)((()=>[c])),_:1})):(0,s.kq)("",!0),!0===i.logged?((0,s.wg)(),(0,s.j4)(_,{key:1,title:"Mon compte",to:"/groupomania/account",href:"#",class:"menu-item"},{default:(0,s.w5)((()=>[m])),_:1})):((0,s.wg)(),(0,s.j4)(_,{key:2,title:"Se connecter",to:"/groupomania/login",href:"#",class:"menu-item"},{default:(0,s.w5)((()=>[f])),_:1})),!0===i.logged?((0,s.wg)(),(0,s.j4)(_,{key:3,title:"Se déconnecter",onClick:t[0]||(t[0]=e=>b.disconnectUser()),to:"/groupomania/login",href:"#",class:"menu-item"},{default:(0,s.w5)((()=>[h])),_:1})):((0,s.wg)(),(0,s.j4)(_,{key:4,title:"S'enregistrer",to:"/groupomania/register",href:"#",class:"menu-item"},{default:(0,s.w5)((()=>[g])),_:1}))])]),(0,s.Wm)(w)],64)}var _=n(6265),w=n.n(_),k={name:"App",methods:{disconnectUser(){localStorage.removeItem("token"),this.logged=!1}},data(){return{logged:!1}},watch:{$route(e,t){const n=document.querySelector("div");n.classList.add("loader-design"),setTimeout((()=>{n.classList.remove("loader-design")}),100)}},mounted(){w().get("https://sannier-renaud.fr/portfolio/groupomania/api/user/me").then((()=>this.logged=!0)).catch((e=>console.log(e)))}},y=n(89);const v=(0,y.Z)(k,[["render",b]]);var P=v,L=n(2483),S=n(7139);const U={id:"createnew-post"},C=(0,s._)("br",null,null,-1),q=(0,s.uE)('<br><label id="design-input-file" for="picture"><i class="fa-solid fa-file-arrow-up"></i> Choisir un fichier...</label><input class="input-file-new-post" type="file" name="picture" id="picture"><p style="font-size:12px;margin-bottom:20px;"> (format : png,jpg,gif) </p><span><strong id="new-file-name">Nom du fichier : </strong><span id="file-name">Aucun</span></span>',5),I=(0,s._)("i",{class:"fa-solid fa-paper-plane"},null,-1),D=(0,s.Uk)(" Envoyer "),x=[I,D],j=(0,s._)("br",null,null,-1),E={key:0},z={class:"one-post"},A=(0,s._)("br",null,null,-1),M={class:"user-infos load"},O=["src"],F=(0,s._)("br",null,null,-1),B={class:"message-post"},$=(0,s._)("br",null,null,-1),V=["src"],T=(0,s._)("div",{class:"separator"},null,-1),H=(0,s._)("br",null,null,-1),N={class:"post-id",hidden:""},R={class:"post-footer"},Z={class:"new-file-input"},G={class:"inputs-user"},W=(0,s._)("p",{class:"p-modify"},"que voulez vous modifier ?",-1),Y={class:"new-design-edit"},K=(0,s._)("p",null,[(0,s._)("i",{class:"fa-solid fa-file-arrow-up"}),(0,s.Uk)(" Choisir un fichier... ")],-1),Q=(0,s._)("p",{class:"supported-formats",style:{"font-size":"12px","margin-bottom":"20px"}}," (format : png,jpg,gif) ",-1),J=(0,s._)("strong",{id:"new-file-name"},"Nom du fichier : ",-1),X={class:"get-name",id:"file-name"},ee=["onClick"],te=(0,s._)("i",{class:"fa-solid fa-trash-can"},null,-1),ne=(0,s.Uk)(" Supprimer la photo "),oe=[te,ne],se={key:2,class:"delete-picture-edit"},ie=(0,s._)("i",{id:"btnDeleteChecked",class:"fa-solid fa-check"},null,-1),ae=(0,s.Uk)(" La photo a bien été supprimée "),le=[ie,ae],re=(0,s._)("br",null,null,-1),ue={key:3,class:"separator2"},pe={class:"post-options-btn"},de=["onClick"],ce={class:"bubble-likes"},me=["onClick"],fe=["onClick"],he=["onClick"],ge=["onClick"],be={class:"date-post"};function _e(e,t,n,i,a,l){return(0,s.wg)(),(0,s.iD)("div",null,[(0,s._)("div",U,[!0===a.logged?((0,s.wg)(),(0,s.iD)("form",{key:0,id:"new-post",enctype:"multipart/form-data",onSubmit:t[2]||(t[2]=(0,o.iM)(((...t)=>e.onSubmit&&e.onSubmit(...t)),["prevent"])),action:"new-post"},[C,(0,s.wy)((0,s._)("input",{type:"text",maxlength:"300",name:"message",id:"message-input",placeholder:"Que souhaitez vous partager ?","onUpdate:modelValue":t[0]||(t[0]=e=>a.message=e),autocomplete:"off"},null,512),[[o.nr,a.message]]),q,(0,s._)("button",{id:"btn-new-post",onClick:t[1]||(t[1]=e=>l.createPost())},x),j],32)):(0,s.kq)("",!0)]),!0===a.logged?((0,s.wg)(),(0,s.iD)("div",E,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(a.posts,((n,i)=>((0,s.wg)(),(0,s.iD)("div",{key:n.id,id:"posts"},[(0,s._)("div",z,[A,(0,s._)("div",M,[(0,s._)("img",{id:"picture-profil-post",src:n.posterProfil,alt:"",srcset:""},null,8,O),(0,s._)("p",null,(0,S.zw)(n.posterFirstname)+" "+(0,S.zw)(n.posterLastname)+" :",1)]),F,(0,s._)("p",B,(0,S.zw)(n.message),1),$,(0,s._)("img",{class:"post-picture",src:n.picture,alt:""},null,8,V),T,H,(0,s._)("p",N,(0,S.zw)(n._id),1),(0,s._)("div",R,[!0===n.selected?((0,s.wg)(),(0,s.iD)("form",{key:0,id:"editPost",enctype:"multipart/form-data",onSubmit:t[5]||(t[5]=(0,o.iM)(((...t)=>e.onSubmit&&e.onSubmit(...t)),["prevent"])),action:"editPost"},[(0,s._)("span",Z,[(0,s._)("div",G,[W,(0,s.wy)((0,s._)("input",{type:"text",name:"message-edit",class:"message-input-edit",autocomplete:"off","onUpdate:modelValue":t[3]||(t[3]=e=>a.messageEdit=e)},null,512),[[o.nr,a.messageEdit]]),(0,s._)("button",Y,[K,(0,s._)("input",{onChange:t[4]||(t[4]=(...e)=>l.previewFiles&&l.previewFiles(...e)),id:"picture-edit",type:"file",name:"picture-edit",class:"input-file-new-post picture-edit-select"},null,32)]),Q]),J,(0,s._)("span",X,(0,S.zw)(a.file.name),1)])],32)):(0,s.kq)("",!0),!0===n.selected&&"https://sannier-renaud.fr/portfolio/groupomania/images/default/deleted-picture.jpg"!=n.picture&&!1===a.deletePictureChecked?((0,s.wg)(),(0,s.iD)("button",{key:1,class:"delete-picture-edit",onClick:e=>(l.deletePicture(n._id,i),a.file=[])},oe,8,ee)):!0===n.selected&&"https://sannier-renaud.fr/portfolio/groupomania/images/default/deleted-picture.jpg"!=n.picture&&!0===a.deletePictureChecked?((0,s.wg)(),(0,s.iD)("button",se,le)):(0,s.kq)("",!0),re,!0===n.selected?((0,s.wg)(),(0,s.iD)("div",ue)):(0,s.kq)("",!0),(0,s._)("div",pe,[!1===n.selected?((0,s.wg)(),(0,s.iD)("i",{key:0,class:(0,S.C_)([a.userLikedPosts.includes(n._id)?"fa-heart":"fa-thumbs-up","btn-like fa-solid"]),onClick:e=>l.likeRequest(i,n._id)},[(0,s._)("span",ce,(0,S.zw)(n.likers.length),1)],10,de)):(0,s.kq)("",!0),n.posterId===a.connectedUserId&&!1===n.selected||"62f2ae7fd2fc5c1305443984"===a.connectedUserId&&!1===n.selected?((0,s.wg)(),(0,s.iD)("i",{key:1,onClick:e=>(l.editPost(i,a.posts),l.hideBubble(),n.selected=!0,a.messageEdit=n.message),class:"fa-solid fa-pen-to-square"},null,8,me)):(0,s.kq)("",!0),n.posterId===a.connectedUserId&&!1===n.selected||"62f2ae7fd2fc5c1305443984"===a.connectedUserId&&!1===n.selected?((0,s.wg)(),(0,s.iD)("i",{key:2,onClick:e=>(l.deletePost(n._id),l.showBubble()),class:"fa-solid fa-trash"},null,8,fe)):(0,s.kq)("",!0),!0===n.selected?((0,s.wg)(),(0,s.iD)("i",{key:3,onClick:e=>(l.sendPost(n._id,i,a.file),l.showBubble(),a.file=[],l.showOtherBtn(n._id,i),a.deletePictureChecked=!1),class:"fa-solid fa-check confirm-btn"},null,8,he)):(0,s.kq)("",!0),!0===n.selected?((0,s.wg)(),(0,s.iD)("i",{key:4,onClick:e=>(n.selected=!1,a.file=[],a.messageEdit=n.message,l.getPosts(),l.showBubble(),l.showOtherBtn(n._id,i),a.deletePictureChecked=!1),class:"fa-solid fa-xmark"},null,8,ge)):(0,s.kq)("",!0)]),(0,s._)("p",be,"posté le : "+(0,S.zw)(n.date),1)])])])))),128))])):(0,s.kq)("",!0)])}var we={data(){return{deletePictureChecked:!1,logged:!1,message:"",messageEdit:"",posts:[],posterFirstname:"",posterLastname:"",posterProfil:"",connectedUserId:"",selectedPost:"",userLikedPosts:[],file:[]}},methods:{hideOtherBtn(){const e=document.querySelectorAll(".btn-like"),t=document.querySelectorAll(".fa-pen-to-square"),n=document.querySelectorAll(".fa-trash");for(let o=0;o<e.length;o++)e[o].classList.add("hidden");for(let o=0;o<t.length;o++)t[o].classList.add("hidden");for(let o=0;o<n.length;o++)n[o].classList.add("hidden");this.hideBubble()},showOtherBtn(e,t){const n=document.querySelectorAll(".post-picture");n[t].classList.remove("deleted-picture");const o=document.querySelectorAll(".btn-like"),s=document.querySelectorAll(".fa-pen-to-square"),i=document.querySelectorAll(".fa-trash");for(let a=0;a<o.length;a++)o[a].classList.remove("hidden");for(let a=0;a<s.length;a++)s[a].classList.remove("hidden");for(let a=0;a<i.length;a++)i[a].classList.remove("hidden");this.showBubble(),this.updateLike()},hideBubble(){const e=document.querySelectorAll(".design-like-number"),t=document.querySelectorAll(".design-like-number-own-post");for(let n=0;n<e.length;n++)e[n].classList.add("hidden");for(let n=0;n<t.length;n++)t[n].classList.add("hidden")},showBubble(){const e=document.querySelectorAll(".design-like-number"),t=document.querySelectorAll(".design-like-number-own-post");for(let n=0;n<e.length;n++)e[n].classList.remove("hidden");for(let n=0;n<t.length;n++)t[n].classList.remove("hidden")},previewFiles(e){this.file=e.target.files[0]},editPost(){this.hideOtherBtn()},sendPost(e,t,n){let o=new FormData;o.append("posterId",this.connectedUserId),o.append("message",this.messageEdit),o.append("file",n),w().put(`https://sannier-renaud.fr/portfolio/groupomania/api/post/${e}`,o).then((()=>this.getPosts())).catch((e=>console.log(e)))},deletePicture(e,t){window.confirm("Voulez vous vraiment supprimer cette photo ? \n\n ⚠️ Cette action est irrévérsible ⚠️")&&(this.deletePictureChecked=!0,w().put(`https://sannier-renaud.fr/portfolio/groupomania/api/post/${e}`,{picture:"https://sannier-renaud.fr/portfolio/groupomania/images/default/deleted-picture.jpg"}).then((()=>{const e=document.querySelectorAll(".post-picture");e[t].classList.add("deleted-picture")})).catch())},getUsers(){w().get("https://sannier-renaud.fr/portfolio/groupomania/api/user").then().catch((e=>console.log(e)))},getPosts(){w().get("https://sannier-renaud.fr/portfolio/groupomania/api/post").then((e=>{this.posts=e.data.allPosts,this.updateLike()})).catch((e=>console.log(e.message)))},updateLike(){w().get(`https://sannier-renaud.fr/portfolio/groupomania/api/user/${this.connectedUserId}`).then((e=>{this.userLikedPosts=e.data.likes})).catch()},createPost(){const e=document.getElementById("picture");if(e.files[0])if(e.files[0].name.includes('"'))alert("Nom de fichier incorrect, supprimer les accents ou caractères spéciaux");else{let t=new FormData;t.append("posterId",this.connectedUserId),t.append("posterFirstname",this.posterFirstname),t.append("posterLastname",this.posterLastname),t.append("posterProfil",this.posterProfil),t.append("message",this.message),t.append("file",e.files[0]),w().post("https://sannier-renaud.fr/portfolio/groupomania/api/post",t).then((()=>{window.location.reload()})).catch()}else{let e=this.message.split(" ").join("");if(""===e)alert("Vous ne pouvez pas créer un post vide.");else{let e=new FormData;e.append("posterId",this.connectedUserId),e.append("posterFirstname",this.posterFirstname),e.append("posterLastname",this.posterLastname),e.append("posterProfil",this.posterProfil),e.append("message",this.message),w().post("https://sannier-renaud.fr/portfolio/groupomania/api/post",e).then((()=>{window.location.reload()})).catch()}}},deletePost(e){window.confirm("Voulez vous vraiment supprimer ce post ? \n\n ⚠️ Cette action est irrévérsible ⚠️")&&w()["delete"](`https://sannier-renaud.fr/portfolio/groupomania/api/post/${e}`).then((t=>{t.data.deletedPost.likers.forEach((t=>{w().patch(`https://sannier-renaud.fr/portfolio/groupomania/api/post/unlike-post/${e}`,{id:t})})),this.getPosts()})).catch((e=>console.log(e)))},likeRequest(e,t){const n=document.querySelectorAll(".btn-like");n[e].classList.contains("fa-thumbs-up")?(w().patch(`https://sannier-renaud.fr/portfolio/groupomania/api/post/like-post/${t}`,{id:this.connectedUserId}).then((()=>{this.updateLike(),this.getPosts()})).catch((e=>console.log(e))),n[e].classList.replace("fa-thumbs-up","fa-heart")):n[e].classList.contains("fa-heart")&&(w().patch(`https://sannier-renaud.fr/portfolio/groupomania/api/post/unlike-post/${t}`,{id:this.connectedUserId}).then((()=>this.getPosts())).catch((e=>console.log(e))),n[e].classList.replace("fa-heart","fa-thumbs-up"))}},mounted(){w().get("https://sannier-renaud.fr/portfolio/groupomania/api/user/me").then((e=>{this.connectedUserId=e.data.data._id,w().get(`https://sannier-renaud.fr/portfolio/groupomania/api/user/${e.data.data._id}`).then((e=>{this.posterFirstname=e.data.firstname,this.posterLastname=e.data.lastname,this.posterProfil=e.data.picture,this.userLikedPosts=e.data.likes})).catch(),this.logged=!0,w().get("https://sannier-renaud.fr/portfolio/groupomania/api/post/").then((e=>{this.posts=e.data.allPosts;let t=document.querySelector("#picture"),n=document.querySelector("#file-name");t.addEventListener("change",(()=>{n.textContent=t.files[0].name}))})).catch()})).catch((e=>{document.cookie="jwt=;max-age=0",this.logged=!1;document.querySelector("#p-not-connected")}))}};const ke=(0,y.Z)(we,[["render",_e]]);var ye=ke;const ve={id:"card"},Pe=(0,s._)("h1",null,"Connexion",-1),Le=(0,s._)("label",{for:"register"},null,-1),Se=(0,s._)("h2",null,[(0,s._)("i",{class:"fa-solid fa-at"}),(0,s.Uk)(" Email :")],-1),Ue=(0,s._)("br",null,null,-1),Ce=(0,s._)("br",null,null,-1),qe=(0,s._)("h2",null,[(0,s._)("i",{class:"fa-solid fa-key"}),(0,s.Uk)(" Mot de passe :")],-1),Ie=(0,s._)("br",null,null,-1),De=(0,s._)("br",null,null,-1),xe=(0,s._)("i",{class:"fa-solid fa-right-to-bracket"},null,-1),je=(0,s.Uk)(" Se connecter "),Ee=[xe,je],ze=(0,s._)("div",{id:"response"},null,-1);function Ae(e,t,n,i,a,l){return(0,s.wg)(),(0,s.iD)("div",ve,[Pe,Le,(0,s._)("form",{onSubmit:t[3]||(t[3]=(0,o.iM)(((...t)=>e.onSubmit&&e.onSubmit(...t)),["prevent"])),action:"register"},[Se,Ue,(0,s.wy)((0,s._)("input",{type:"text",name:"email",id:"email","onUpdate:modelValue":t[0]||(t[0]=e=>a.email=e)},null,512),[[o.nr,a.email]]),Ce,qe,Ie,(0,s.wy)((0,s._)("input",{type:"password",name:"password",id:"password","onUpdate:modelValue":t[1]||(t[1]=e=>a.password=e)},null,512),[[o.nr,a.password]]),De,(0,s._)("button",{type:"submit",onClick:t[2]||(t[2]=e=>l.verifyLogin())},Ee),ze],32)])}var Me={data(){return{email:"",password:""}},methods:{verifyLogin(){w().post("https://sannier-renaud.fr/portfolio/groupomania/api/user/login/",{email:this.email,password:this.password}).then((function(e){response.innerHTML="<p>Connexion réussie</p><br>",response.style.color="rgb(63, 211, 61)",localStorage.setItem("token",e.data.acessToken),setTimeout((()=>{window.location.href="./"}),500)})).catch((e=>{response.innerHTML="<p>La connexion a échouée</p><br>",response.style.color="rgb(211, 61, 61)"}))}}};const Oe=(0,y.Z)(Me,[["render",Ae]]);var Fe=Oe;const Be={id:"card"},$e=(0,s._)("h1",null,"Inscription",-1),Ve=(0,s._)("label",{for:"register"},null,-1),Te=(0,s._)("h2",null,[(0,s._)("i",{class:"fa-solid fa-user-pen"}),(0,s.Uk)(" Prénom :")],-1),He=(0,s._)("br",null,null,-1),Ne=(0,s._)("br",null,null,-1),Re=(0,s._)("h2",null,[(0,s._)("i",{class:"fa-solid fa-user-pen"}),(0,s.Uk)(" Nom :")],-1),Ze=(0,s._)("br",null,null,-1),Ge=(0,s._)("br",null,null,-1),We=(0,s._)("br",null,null,-1),Ye=(0,s._)("h2",null,[(0,s._)("i",{class:"fa-solid fa-at"}),(0,s.Uk)(" Email :")],-1),Ke=(0,s._)("br",null,null,-1),Qe=(0,s._)("br",null,null,-1),Je=(0,s._)("h2",null,[(0,s._)("i",{class:"fa-solid fa-key"}),(0,s.Uk)(" Mot de passe :")],-1),Xe=(0,s._)("br",null,null,-1),et=(0,s._)("br",null,null,-1),tt=(0,s._)("i",{class:"fa-solid fa-user-plus"},null,-1),nt=(0,s.Uk)("S'inscrire "),ot=[tt,nt],st=(0,s._)("div",{id:"response"},null,-1);function it(e,t,n,i,a,l){return(0,s.wg)(),(0,s.iD)("div",Be,[$e,Ve,(0,s._)("form",{onSubmit:t[5]||(t[5]=(0,o.iM)(((...t)=>e.onSubmit&&e.onSubmit(...t)),["prevent"])),action:"register"},[Te,He,(0,s.wy)((0,s._)("input",{type:"text",autocomplete:"off",name:"firstname",id:"firstname","onUpdate:modelValue":t[0]||(t[0]=e=>a.firstname=e)},null,512),[[o.nr,a.firstname]]),Ne,Re,Ze,(0,s.wy)((0,s._)("input",{type:"text",autocomplete:"off",name:"lastname",id:"lastname","onUpdate:modelValue":t[1]||(t[1]=e=>a.lastname=e)},null,512),[[o.nr,a.lastname]]),Ge,We,Ye,Ke,(0,s.wy)((0,s._)("input",{type:"email",name:"email",id:"email","onUpdate:modelValue":t[2]||(t[2]=e=>a.email=e)},null,512),[[o.nr,a.email]]),Qe,Je,Xe,(0,s.wy)((0,s._)("input",{type:"password",name:"password",id:"password","onUpdate:modelValue":t[3]||(t[3]=e=>a.password=e)},null,512),[[o.nr,a.password]]),et,(0,s._)("button",{type:"submit",onClick:t[4]||(t[4]=e=>l.sendUserData())},ot),st],32)])}var at={data(){return{users:null,firstname:"",lastname:"",email:"",password:""}},methods:{sendUserData(){w().post("https://sannier-renaud.fr/portfolio/groupomania/api/user/register/",{firstname:this.firstname,lastname:this.lastname,email:this.email,password:this.password}).then((function(e){response.innerHTML="<p>Création réussie !<br>  redirection dans 3 secondes...</p><br>",response.style.color="rgb(63, 211, 61)";let t=3;setInterval((()=>{t--,0===t?window.location.href="./login":(response.innerHTML=`<p>Création réussie !<br> redirection dans ${t} secondes...</p><br>`,response.style.color="rgb(63, 211, 61)")}),1e3)})).catch((function(e){response.innerHTML="<p>Données invalide(s) et/ou email déjà enregistré.</p><br>",response.style.color="rgb(211, 61, 61)"}))}}};const lt=(0,y.Z)(at,[["render",it]]);var rt=lt;const ut={id:"not-found"},pt=(0,s._)("h1",null,"ERREUR 404",-1),dt=(0,s._)("p",{id:"return-error"},[(0,s.Uk)(" Vous n'etes pas sur la bonne route,"),(0,s._)("br"),(0,s._)("br"),(0,s.Uk)(" ouvrez le menu pour revenir sur une route autorisée. ")],-1),ct=(0,s._)("i",{id:"arrow-indicator",class:"fa-solid fa-arrow-left-long"},null,-1),mt=[pt,dt,ct];function ft(e,t,n,o,i,a){return(0,s.wg)(),(0,s.iD)("div",ut,mt)}var ht={};const gt=(0,y.Z)(ht,[["render",ft]]);var bt=gt;const _t={id:"userInfos"},wt=(0,s._)("br",null,null,-1),kt=(0,s._)("h1",null,[(0,s._)("i",{class:"fa-solid fa-file-user"}),(0,s.Uk)("Mon compte :")],-1),yt=(0,s._)("br",null,null,-1),vt=["src"],Pt=(0,s._)("br",null,null,-1),Lt=(0,s._)("br",null,null,-1),St=(0,s._)("br",null,null,-1),Ut=(0,s._)("br",null,null,-1),Ct=(0,s._)("br",null,null,-1),qt=(0,s._)("div",{class:"separator"},null,-1),It=(0,s._)("br",null,null,-1),Dt=(0,s._)("br",null,null,-1),xt=(0,s.uE)('<input class="input-file-new-post" type="file" name="picture-profil-edit" id="picture-profil-edit"><label class="input-file-design" for="picture-profil-edit"><i class="fa-solid fa-arrows-rotate"></i> Changer ma photo de profil</label><br><br><br><span><p style="font-size:10px;">(format : png,jpg,gif)</p><strong id="new-file-name">Nom du fichier : </strong><span id="file-name">Aucun</span><br></span><br>',7),jt=(0,s._)("i",{class:"fa-solid fa-check"},null,-1),Et=(0,s.Uk)(" Valider "),zt=[jt,Et],At=(0,s._)("br",null,null,-1);function Mt(e,t,n,i,a,l){return(0,s.wg)(),(0,s.iD)("div",null,[(0,s._)("div",_t,[wt,kt,yt,(0,s._)("span",null,[(0,s._)("img",{style:(0,S.j5)("https://sannier-renaud.fr/portfolio/groupomania/images/default/default.png"===a.picture?"left: 0px;":""),id:"picture-profil",src:a.picture,alt:"",srcset:""},null,12,vt),"https://sannier-renaud.fr/portfolio/groupomania/images/default/default.png"!=a.picture?((0,s.wg)(),(0,s.iD)("i",{key:0,onClick:t[0]||(t[0]=e=>l.setDefault()),class:"fa-solid fa-xmark default-picture"})):(0,s.kq)("",!0)]),Pt,(0,s._)("p",null,"Nom : "+(0,S.zw)(a.lastname),1),Lt,(0,s._)("p",null,"Prénom : "+(0,S.zw)(a.firstname),1),St,(0,s._)("p",null,"Email : "+(0,S.zw)(a.email),1),Ut,Ct,qt,It,Dt,!0===a.logged?((0,s.wg)(),(0,s.iD)("form",{key:0,id:"newPost",enctype:"multipart/form-data",onSubmit:t[2]||(t[2]=(0,o.iM)(((...t)=>e.onSubmit&&e.onSubmit(...t)),["prevent"])),action:"newPost"},[xt,(0,s._)("button",{id:"send-modified-profil",onClick:t[1]||(t[1]=e=>l.editProfil())},zt)],32)):(0,s.kq)("",!0)]),At])}var Ot={data(){return{logged:!1,firstname:"",lastname:"",email:"",picture:"",connectedId:""}},methods:{setDefault(){w().put(`https://sannier-renaud.fr/portfolio/groupomania/api/user/${this.connectedId}`,{picture:""}).then((()=>{w().get("https://sannier-renaud.fr/portfolio/groupomania/api/post").then((e=>{let t=e.data.allPosts,n=t.filter((e=>e.posterId===this.connectedId));if(n.length>0)for(let o=0;o<n.length;o++)w().put(`https://sannier-renaud.fr/portfolio/groupomania/api/post/${n[o]._id}`,{posterProfil:"https://sannier-renaud.fr/portfolio/groupomania/images/default/default.png"}).then((()=>window.location.reload())).catch((e=>{console.log(e)}));else window.location.reload()}))})).catch()},editProfil(){let e=document.querySelector("#picture-profil-edit");if(e.files[0])if(e.files[0].name.includes('"'))alert("Nom de fichier incorrect, supprimer les accents ou caractères spéciaux");else{let t=new FormData;t.append("file",e.files[0]),w().put(`https://sannier-renaud.fr/portfolio/groupomania/api/user/${this.connectedId}`,t).then((e=>{w().get("https://sannier-renaud.fr/portfolio/groupomania/api/post").then((t=>{let n=t.data.allPosts,o=n.filter((e=>e.posterId===this.connectedId));for(let s=0;s<o.length;s++)w().put(`https://sannier-renaud.fr/portfolio/groupomania/api/post/${o[s]._id}`,{posterProfil:e.data.picture}).then().catch((e=>console.log(e)));window.location.reload()})).catch((e=>console.log(e)))})).catch()}else alert("Aucun fichier chargé")},disconnectUser(){document.cookie="jwt=;max-age=0",this.logged=!1}},mounted(){w().get("https://sannier-renaud.fr/portfolio/groupomania/api/user/me").then((e=>{console.log(e),this.logged=!0,w().get(`https://sannier-renaud.fr/portfolio/groupomania/api/user/${e.data.data._id}`).then((e=>{this.firstname=e.data.firstname,this.lastname=e.data.lastname,this.email=e.data.email,this.picture=e.data.picture,this.connectedId=e.data._id;let t=document.querySelector("#picture-profil-edit"),n=document.querySelector("#file-name");t.addEventListener("change",(()=>{n.textContent=t.files[0].name}))})).catch()})).catch((e=>console.log(e)))}};const Ft=(0,y.Z)(Ot,[["render",Mt]]);var Bt=Ft;const $t=[{name:"Home",path:"/groupomania/",component:ye,meta:{title:"Groupomania | Home"}},{name:"Login",path:"/groupomania/login",component:Fe,meta:{title:"Groupomania | Connexion"}},{name:"Register",path:"/groupomania/register",component:rt,meta:{title:"Groupomania | Inscription"}},{name:"Account",path:"/groupomania/account",component:Bt,meta:{title:"Groupomania | Mon compte"}},{name:"NotFound",path:"/:pathMatch(.*)",component:bt,meta:{title:"Groupomania | 404 Page non trouvée"}}],Vt=(0,L.p7)({history:(0,L.PO)(),mode:"hash",routes:$t});Vt.afterEach((e=>{document.title=e.meta.title}));var Tt=Vt;w().defaults.headers.common.Authorization="Bearer "+localStorage.getItem("token");const Ht=(0,o.ri)(P);Ht.use(Tt),Ht.mount("#app")}},t={};function n(o){var s=t[o];if(void 0!==s)return s.exports;var i=t[o]={exports:{}};return e[o](i,i.exports,n),i.exports}n.m=e,function(){var e=[];n.O=function(t,o,s,i){if(!o){var a=1/0;for(p=0;p<e.length;p++){o=e[p][0],s=e[p][1],i=e[p][2];for(var l=!0,r=0;r<o.length;r++)(!1&i||a>=i)&&Object.keys(n.O).every((function(e){return n.O[e](o[r])}))?o.splice(r--,1):(l=!1,i<a&&(a=i));if(l){e.splice(p--,1);var u=s();void 0!==u&&(t=u)}}return t}i=i||0;for(var p=e.length;p>0&&e[p-1][2]>i;p--)e[p]=e[p-1];e[p]=[o,s,i]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){n.p=""}(),function(){var e={143:0};n.O.j=function(t){return 0===e[t]};var t=function(t,o){var s,i,a=o[0],l=o[1],r=o[2],u=0;if(a.some((function(t){return 0!==e[t]}))){for(s in l)n.o(l,s)&&(n.m[s]=l[s]);if(r)var p=r(n)}for(t&&t(o);u<a.length;u++)i=a[u],n.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return n.O(p)},o=self["webpackChunkgroupomania"]=self["webpackChunkgroupomania"]||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))}();var o=n.O(void 0,[998],(function(){return n(357)}));o=n.O(o)})();
//# sourceMappingURL=app.37469c58.js.map